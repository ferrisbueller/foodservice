-- H2 2.1.214;
;
CREATE USER IF NOT EXISTS "SA" SALT '465934aea3b7becb' HASH '75da32d149df54a0e0cde237429c5cb95326e0cd6312aed51d668fcc9fb183b7' ADMIN;
CREATE CACHED TABLE "PUBLIC"."ROLES"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 4) NOT NULL,
    "NAME" CHARACTER VARYING(20)
);
ALTER TABLE "PUBLIC"."ROLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID");
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.ROLES;
INSERT INTO "PUBLIC"."ROLES" VALUES
(1, 'ROLE_USER'),
(2, 'ROLE_MODERATOR'),
(3, 'ROLE_ADMIN');
CREATE CACHED TABLE "PUBLIC"."USER_ROLES"(
    "USER_ID" BIGINT NOT NULL,
    "ROLE_ID" INTEGER NOT NULL
);
ALTER TABLE "PUBLIC"."USER_ROLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_C" PRIMARY KEY("USER_ID", "ROLE_ID");
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.USER_ROLES;
INSERT INTO "PUBLIC"."USER_ROLES" VALUES
(1, 1),
(1, 2);
CREATE CACHED TABLE "PUBLIC"."USERS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 2) NOT NULL,
    "EMAIL" CHARACTER VARYING(255),
    "PASSWORD" CHARACTER VARYING(255),
    "USERNAME" CHARACTER VARYING(255)
);
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4D" PRIMARY KEY("ID");
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.USERS;
INSERT INTO "PUBLIC"."USERS" VALUES
(1, 'ravivj@gmail.com', '$2a$10$pYrq4ADQ03qId1f3TflL3efAt9ws0HK1E3yreLLnbd/vB1q5TmH.K', 'mod');
CREATE CACHED TABLE "PUBLIC"."CATEGORIES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);
ALTER TABLE "PUBLIC"."CATEGORIES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.CATEGORIES;
INSERT INTO "PUBLIC"."CATEGORIES" VALUES
(1, 'vegetable'),
(2, 'fruit'),
(3, 'bread');
CREATE CACHED TABLE "PUBLIC"."ITEMS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1) NOT NULL,
    "NAME" CHARACTER VARYING(255),
    "CATEGORY_ID" BIGINT,
    "INVENTORY_SIZE" BIGINT,
    "PRICE" FLOAT(53)
);
ALTER TABLE "PUBLIC"."ITEMS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_42" PRIMARY KEY("ID");
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.ITEMS;
INSERT INTO "PUBLIC"."ITEMS" VALUES
(1, 'broccoli', 1, 7, 10.0),
(2, 'spinach', 1, 4, 5.0),
(3, 'apple', 2, 2, 100.0),
(4, 'banana', 2, 4, 10.0);
CREATE CACHED TABLE "PUBLIC"."USER_CART_ENTRY"(
    "ITEM_ID" BIGINT NOT NULL,
    "USER_ID" BIGINT NOT NULL,
    "INVENTORY_COUNT" BIGINT
);
ALTER TABLE "PUBLIC"."USER_CART_ENTRY" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ITEM_ID", "USER_ID");
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USER_CART_ENTRY;
CREATE CACHED TABLE "PUBLIC"."ORDERS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 5) NOT NULL,
    "ORDER_PRICE" FLOAT(53),
    "USER_ID" BIGINT
);
ALTER TABLE "PUBLIC"."ORDERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" PRIMARY KEY("ID");
-- 4 +/- SELECT COUNT(*) FROM PUBLIC.ORDERS;
INSERT INTO "PUBLIC"."ORDERS" VALUES
(1, 135.0, 1),
(2, 0.0, 1),
(3, 0.0, 1),
(4, 20.0, 1);
CREATE CACHED TABLE "PUBLIC"."ORDER_ENTRIES"(
    "ITEM_ID" BIGINT NOT NULL,
    "ORDER_ID" BIGINT NOT NULL,
    "INVENTORY_COUNT" BIGINT,
    "BUY_PRICE" FLOAT(53)
);
ALTER TABLE "PUBLIC"."ORDER_ENTRIES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4C" PRIMARY KEY("ITEM_ID", "ORDER_ID");
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.ORDER_ENTRIES;
INSERT INTO "PUBLIC"."ORDER_ENTRIES" VALUES
(1, 1, 2, 10.0),
(2, 1, 1, 5.0),
(3, 1, 1, 100),
(4, 1, 1, 10),
(1, 4, 1, 10.0),
(4, 4, 1, 10.0);
ALTER TABLE "PUBLIC"."ITEMS" ADD CONSTRAINT "PUBLIC"."UKK7174TW0GO8ERAIVNYD0NEUJ3" UNIQUE("NAME", "CATEGORY_ID");
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."UKR43AF9AP4EDM43MMTQ01ODDJ6" UNIQUE("USERNAME");
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."UK6DOTKOTT2KJSP8VW4D0M25FB7" UNIQUE("EMAIL");
ALTER TABLE "PUBLIC"."CATEGORIES" ADD CONSTRAINT "PUBLIC"."UKT8O6PIVUR7NN124JEHX7CYGW5" UNIQUE("NAME");
ALTER TABLE "PUBLIC"."ITEMS" ADD CONSTRAINT "PUBLIC"."FKJCDCDE7HTB3TYJGOUO4G9XBMR" FOREIGN KEY("CATEGORY_ID") REFERENCES "PUBLIC"."CATEGORIES"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."ORDERS" ADD CONSTRAINT "PUBLIC"."FK32QL8UBNTJ5UH44PH9659TIIH" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."USER_ROLES" ADD CONSTRAINT "PUBLIC"."FKH8CIRAMU9CC9Q3QCQIV4UE8A6" FOREIGN KEY("ROLE_ID") REFERENCES "PUBLIC"."ROLES"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."USER_CART_ENTRY" ADD CONSTRAINT "PUBLIC"."FKNAY14UFNPB71GUMDMAJRAJL2Q" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."USER_ROLES" ADD CONSTRAINT "PUBLIC"."FKHFH9DX7W3UBF1CO1VDEV94G3F" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."ORDER_ENTRIES" ADD CONSTRAINT "PUBLIC"."FKN9WCU3T4NOWFGQEOGMGG5H44V" FOREIGN KEY("ITEM_ID") REFERENCES "PUBLIC"."ITEMS"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."ORDER_ENTRIES" ADD CONSTRAINT "PUBLIC"."FKMDWEBXMXTXC5IDI2QL8PGQEBP" FOREIGN KEY("ORDER_ID") REFERENCES "PUBLIC"."ORDERS"("ID") NOCHECK;
ALTER TABLE "PUBLIC"."USER_CART_ENTRY" ADD CONSTRAINT "PUBLIC"."FKF8AJ4CAI3QSMQ9J05ID028TW0" FOREIGN KEY("ITEM_ID") REFERENCES "PUBLIC"."ITEMS"("ID") NOCHECK;
